{"version":3,"sources":["assets/icons/check.svg","assets/icons/calendar.svg","assets/icons/clock.svg","assets/icons/place.svg","assets/icons/money.svg","reducers/Purchases.js","constants/ActionTypes.js","constants/KeyTypes.js","actions/Purchases.js","components/CardBox/index.js","constants/Util.js","components/Purchase/PurchaseTableRow.js","components/Table/HeaderCellWithIcon.js","components/Purchase/purchaseTable.js","components/Purchase/purchaseTimeLine.js","pages/PurchasesHistory.js","index.js"],"names":["module","exports","__webpack_require__","p","Purchases","state","action","type","retrivePurchasesAndProducts","payload","separateEvents","events","reduce","reduceEvents","purchase","product","purchases","groupProducts","sort","sortTimeStampDesc","Object","objectSpread","separated","e","event","push","transformProduct","transformPurchase","_ref","timestamp","custom_data","id","findKey","timeStamp","moment","price","name","_ref2","revenue","store","data","key","pair","find","value","_ref3","map","products","filter","a","b","utc","diff","getPurchasesHistory","CardBox","children","_ref$cardStyle","cardStyle","_ref$childrenStyle","childrenStyle","react_default","createElement","className","concat","currencyFormatter","Intl","NumberFormat","style","currency","PurchaseTableRow","format","HeaderCellWithIcon","icon","title","src","alt","PurchaseTable","Table_HeaderCellWithIcon","calendar","clock","place","money","Purchase_PurchaseTableRow","PurchaseTimeLine","purchaseList","check","components_CardBox","purchaseTable","PurchasesHistory","_useReducer","useReducer","PurchaseReducer","_useReducer2","slicedToArray","dispatch","useEffect","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","prev","next","fetch","sent","json","stop","apply","this","arguments","getData","ReactDOM","render","pages_PurchasesHistory","document","getElementById"],"mappings":"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","file":"static/js/main.245edf22.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/check.c4e0b8fe.svg\";","module.exports = __webpack_public_path__ + \"static/media/calendar.1082d5d5.svg\";","module.exports = __webpack_public_path__ + \"static/media/clock.4b0f830c.svg\";","module.exports = __webpack_public_path__ + \"static/media/place.d546ec00.svg\";","module.exports = __webpack_public_path__ + \"static/media/money.5b362d7b.svg\";","import { GET_PURCHASES_HISTORY } from \"../constants/ActionTypes\";\r\nimport moment from \"moment\";\r\nimport {\r\n  EVENT_COMPROU_PRODUTO,\r\n  EVENT_COMPROU,\r\n  TRANSACTION_ID,\r\n  STORE_NAME,\r\n  PRODUCT_NAME,\r\n  PRODUCT_PRICE\r\n} from \"../constants/KeyTypes\";\r\n\r\nexport default (state, action) => {\r\n  switch (action.type) {\r\n    case GET_PURCHASES_HISTORY:\r\n      return retrivePurchasesAndProducts(state, action.payload);\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst retrivePurchasesAndProducts = (state, payload) => {\r\n  let separateEvents = payload.events.reduce(reduceEvents, {\r\n    purchase: [],\r\n    product: []\r\n  });\r\n  const purchases = groupProducts(separateEvents).sort(sortTimeStampDesc);\r\n  return {\r\n    ...state,\r\n    purchases\r\n  };\r\n};\r\n\r\nconst reduceEvents = (separated, e) => {\r\n  if (e.event === EVENT_COMPROU_PRODUTO) {\r\n    separated.product.push(transformProduct(e));\r\n  } else if (e.event === EVENT_COMPROU) {\r\n    separated.purchase.push(transformPurchase(e));\r\n  }\r\n  return { ...separated };\r\n};\r\n\r\nconst transformProduct = ({ timestamp, custom_data }) => {\r\n  return {\r\n    id: findKey(custom_data, TRANSACTION_ID),\r\n    timeStamp: moment(timestamp),\r\n    price: findKey(custom_data, PRODUCT_PRICE),\r\n    name: findKey(custom_data, PRODUCT_NAME)\r\n  };\r\n};\r\nconst transformPurchase = ({ timestamp, revenue, custom_data }) => {\r\n  return {\r\n    id: findKey(custom_data, TRANSACTION_ID),\r\n    timeStamp: moment(timestamp),\r\n    store: findKey(custom_data, STORE_NAME),\r\n    revenue\r\n  };\r\n};\r\n\r\nconst findKey = (data, key) => {\r\n  const pair = data.find(value => value.key === key);\r\n  return pair ? pair.value : null;\r\n};\r\n\r\nconst groupProducts = ({ purchase, product }) => {\r\n  return purchase.map(value => {\r\n    return { ...value, products: product.filter(p => p.id === value.id) };\r\n  });\r\n};\r\n\r\nconst sortTimeStampDesc = (a, b) =>\r\n  moment.utc(b.timeStamp).diff(moment.utc(a.timeStamp));\r\n","export const GET_PURCHASES_HISTORY = \"PURCHASES_HISTORY\";\r\n","export const EVENT_COMPROU_PRODUTO = \"comprou-produto\";\r\nexport const EVENT_COMPROU = \"comprou\";\r\nexport const STORE_NAME = \"store_name\";\r\nexport const TRANSACTION_ID = \"transaction_id\";\r\nexport const PRODUCT_NAME = \"product_name\";\r\nexport const PRODUCT_PRICE = \"product_price\";\r\n","import { GET_PURCHASES_HISTORY } from \"../constants/ActionTypes\";\r\n\r\nexport const getPurchasesHistory = data => {\r\n  return {\r\n    type: GET_PURCHASES_HISTORY,\r\n    payload: data\r\n  };\r\n};\r\n","import React from \"react\";\r\n\r\nconst CardBox = ({ children, cardStyle = \"\", childrenStyle = \"\" }) => {\r\n  return (\r\n    <div className={`card ${cardStyle}`}>\r\n      <div className={`card__body ${childrenStyle}`}>{children}</div>\r\n    </div>\r\n  );\r\n};\r\nexport default CardBox;\r\n","export const PRODUCT = \"Produto\";\r\nexport const PRICE = \"PreÃ§o\";\r\n\r\nexport const currencyFormatter = new Intl.NumberFormat(\"pt-BR\", {\r\n  style: \"currency\",\r\n  currency: \"BRL\"\r\n});\r\n","import React from \"react\";\r\nimport { currencyFormatter } from \"../../constants/Util\";\r\nconst PurchaseTableRow = ({ product }) => {\r\n  const { price, name } = product;\r\n\r\n  return (\r\n    <tr key={name}>\r\n      <td className=\"table-body-cell\">{name}</td>\r\n      <td />\r\n      <td />\r\n      <td className=\"table-body-cell\">{currencyFormatter.format(price)}</td>\r\n    </tr>\r\n  );\r\n};\r\nexport default PurchaseTableRow;\r\n","import React from \"react\";\r\n\r\nconst HeaderCellWithIcon = ({ icon, title }) => {\r\n  return (\r\n    <th className=\"table-head-cell\">\r\n      <img className=\"table-head-cell__img\" src={icon} alt={title} />\r\n      <span className=\"table-head-cell__title\"> {title}</span>\r\n    </th>\r\n  );\r\n};\r\nexport default HeaderCellWithIcon;\r\n","import React from \"react\";\r\nimport PurchaseTableRow from \"./PurchaseTableRow\";\r\nimport HeaderCellWithIcon from \"../Table/HeaderCellWithIcon\";\r\nimport calendar from \"../../assets/icons/calendar.svg\";\r\nimport clock from \"../../assets/icons/clock.svg\";\r\nimport place from \"../../assets/icons/place.svg\";\r\nimport money from \"../../assets/icons/money.svg\";\r\nimport { PRODUCT, PRICE, currencyFormatter } from \"../../constants/Util\";\r\nconst PurchaseTable = ({ purchase }) => {\r\n  const { id, timeStamp, store, revenue, products } = purchase;\r\n\r\n  return (\r\n    <table className=\"table-container\">\r\n      <thead className=\"table-header\">\r\n        <tr>\r\n          <HeaderCellWithIcon\r\n            icon={calendar}\r\n            title={timeStamp.format(\"DD/MM/YYYY\")}\r\n          />\r\n          <HeaderCellWithIcon icon={clock} title={timeStamp.format(\"hh:mm\")} />\r\n          <HeaderCellWithIcon icon={place} title={store} />\r\n          <HeaderCellWithIcon\r\n            icon={money}\r\n            title={currencyFormatter.format(revenue)}\r\n          />\r\n        </tr>\r\n        <tr>\r\n          <th className=\"table-body-cell table-body-cell--title-bold\">\r\n            {PRODUCT}\r\n          </th>\r\n          <th />\r\n          <th />\r\n          <th className=\"table-body-cell  table-body-cell--title-bold\">\r\n            {PRICE}\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody className=\"table-body table-row-align-left\">\r\n        {products &&\r\n          products.map(product => <PurchaseTableRow product={product} />)}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\nexport default PurchaseTable;\r\n","import React from \"react\";\r\nimport check from \"../../assets/icons/check.svg\";\r\nimport CardBox from \"../CardBox\";\r\nimport PurchaseTable from \"./purchaseTable\";\r\nexport default function PurchaseTimeLine({ purchaseList }) {\r\n  const { purchases } = purchaseList;\r\n\r\n  return (\r\n    <div className=\"timeline-container\">\r\n      {purchases.map(purchase => {\r\n        return (\r\n          <div className=\"timeline__item\" key={purchase.id}>\r\n            <img className=\"timeline-badge\" src={check} alt={\"Checked Icon\"} />\r\n            <CardBox\r\n              cardStyle=\"card--animation-slide\"\r\n              childrenStyle=\"card--indicator\"\r\n            >\r\n              <PurchaseTable purchase={purchase} />\r\n            </CardBox>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useReducer, useEffect } from \"react\";\nimport PurchaseReducer from \"../reducers/Purchases\";\nimport { getPurchasesHistory } from \"../actions/Purchases\";\nimport PurchaseTimeLine from \"../components/Purchase/purchaseTimeLine\";\n\nconst PurchasesHistory = () => {\n  const [purchaseList, dispatch] = useReducer(PurchaseReducer);\n  useEffect(() => {\n    const getData = async () => {\n      const response = await fetch(\n        `https://storage.googleapis.com/dito-questions/events.json`\n      );\n      const data = await response.json();\n      dispatch(getPurchasesHistory(data));\n    };\n\n    getData();\n  }, []);\n\n  return (\n    <div className=\"main-container\">\n      {purchaseList && <PurchaseTimeLine purchaseList={purchaseList} />}\n    </div>\n  );\n};\n\nexport default PurchasesHistory;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/app.scss\";\nimport PurchasesHistory from \"./pages/PurchasesHistory\";\n\nReactDOM.render(<PurchasesHistory />, document.getElementById(\"root\"));\n"],"sourceRoot":""}